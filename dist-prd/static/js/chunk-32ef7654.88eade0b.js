(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-32ef7654"],{"2d5d":function(e,t,i){"use strict";function a(e,t){var i=new FileReader;i.readAsDataURL(e.raw),i.onload=function(e){console.log(e),t(e.target.result)}}i.d(t,"a",function(){return a})},"333d":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[i("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},o=[];i("c5f6");Math.easeInOutQuad=function(e,t,i,a){return e/=a/2,e<1?i/2*e*e+t:(e--,-i/2*(e*(e-2)-1)+t)};var n=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function r(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function s(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function l(e,t,i){var a=s(),o=e-a,l=20,c=0;t="undefined"===typeof t?500:t;var u=function e(){c+=l;var s=Math.easeInOutQuad(c,a,o,t);r(s),c<t?n(e):i&&"function"===typeof i&&i()};u()}var c={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll&&l(0,800)},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&l(0,800)}}},u=c,d=(i("dfcf"),i("2877")),m=Object(d["a"])(u,a,o,!1,null,"38ef71f0",null);t["a"]=m.exports},"586c":function(e,t,i){"use strict";var a=i("ccb0"),o=i.n(a);o.a},"690d":function(e,t,i){},"705e":function(e,t,i){},"7c96":function(e,t,i){"use strict";var a=i("f036"),o=i.n(a);o.a},a27e:function(e,t,i){"use strict";var a=i("705e"),o=i.n(a);o.a},a969:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"singleImageUpload2 upload-container"},[i("el-upload",{ref:"uploadEl",staticClass:"image-uploader",attrs:{action:"''","auto-upload":!1,"show-file-list":!1,"list-type":"picture","on-change":e.handleImageSuccess,drag:""}},[i("div",{staticClass:"image-prepare"},[i("svg-icon",{attrs:{"icon-class":"camera"}}),e._v(" "),i("div",{staticClass:"image-desc",domProps:{innerHTML:e._s(e.placeholder)}})],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.imageUrl.length>0,expression:"imageUrl.length>0"}],staticClass:"image-preview"},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.imageUrl.length>1,expression:"imageUrl.length>1"}],staticClass:"image-preview-wrapper"},[i("img",{attrs:{src:e.imageUrl}}),e._v(" "),i("div",{staticClass:"image-preview-action"},[i("svg-icon",{attrs:{"icon-class":"camera"}})],1)])])])],1)},o=[],n=i("2d5d"),r={name:"SingleImageUpload2",props:{value:{type:String,default:""},placeholder:{type:String,default:"添加产品Logo<br/>尺寸200px*200px<br/>2M以内"}},data:function(){return{tempUrl:"",dataObj:{token:"",key:""}}},computed:{imageUrl:function(){return this.value}},methods:{uploadStart:function(){console.log(this.$refs.uploadEl)},rmImage:function(){this.emitInput("")},emitInput:function(e){this.$emit("input",e)},handleImageSuccess:function(e){var t=this,i=e.size/1024/1024<2;i?Object(n["a"])(e,function(e){t.emitInput(e)}):this.$message.error("上传图片大小不能超过 2MB!")}}},s=r,l=(i("586c"),i("2877")),c=Object(l["a"])(s,a,o,!1,null,"40a6bd78",null);t["a"]=c.exports},ccb0:function(e,t,i){},dfcf:function(e,t,i){"use strict";var a=i("690d"),o=i.n(a);o.a},ec59:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("添加案例")]),e._v(" "),i("el-dialog",{attrs:{title:"确定删除？",visible:e.centerDialogVisible,width:"30%",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[i("span",[e._v("删除后将不可恢复。")]),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.centerDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.deleteNews}},[e._v("确 定")])],1)]),e._v(" "),i("el-dialog",{attrs:{title:"添加案例",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("el-form",{ref:"form",attrs:{model:e.form,rules:e.formRules,"label-position":"top"}},[i("Upload",{staticStyle:{width:"300px",height:"200px"},attrs:{placeholder:"添加案例封面<br/>尺寸200px*200px<br/>2M以内"},model:{value:e.form.dialogImageUrl,callback:function(t){e.$set(e.form,"dialogImageUrl",t)},expression:"form.dialogImageUrl"}}),e._v(" "),i("el-form-item",{attrs:{label:"案例名称",prop:"name","label-width":e.formLabelWidth}},[i("el-input",{attrs:{placeholder:"输入案例名称",autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"案例概述",prop:"desc","label-width":e.formLabelWidth}},[i("el-input",{attrs:{type:"textarea",rows:8,placeholder:"输入案例概述"},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1),e._v(" "),i("el-radio",{attrs:{label:"link"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("链接")]),e._v(" "),i("el-radio",{attrs:{label:"pdf"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("PDF文档")]),e._v(" "),i("el-radio",{attrs:{label:"image"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("图片")]),e._v(" "),i("el-form-item",{staticClass:"marginTop",attrs:{prop:"linkName",label:"","label-width":e.formLabelWidth}},["link"===e.radio?i("el-input",{attrs:{placeholder:"输入案例链接,当前仅支持公众号文章链接"},model:{value:e.form.linkUrl,callback:function(t){e.$set(e.form,"linkUrl",t)},expression:"form.linkUrl"}}):e._e()],1),e._v(" "),"pdf"===e.radio?i("el-form-item",{attrs:{label:""}},[i("el-upload",{staticClass:"upload-demo",attrs:{action:"''","auto-upload":!1,"on-preview":e.handlePreview,"on-remove":e.handleRemove,"before-remove":e.beforeRemove,limit:1,"on-exceed":e.handleExceed,"on-change":e.handleChange,"file-list":e.fileList}},[i("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1)],1):e._e(),e._v(" "),"image"===e.radio?i("el-form-item",[i("Upload",{staticStyle:{width:"200px",height:"200px"},attrs:{placeholder:"添加案例封面<br/>尺寸200px*200px<br/>2M以内"},model:{value:e.caseImg,callback:function(t){e.caseImg=t},expression:"caseImg"}})],1):e._e()],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.cancel}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.submitCase}},[e._v("确 定")])],1)],1),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"dragTable",staticStyle:{width:"100%"},attrs:{data:e.list,border:!1,"row-key":"id",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{align:"center",label:"",width:"115"},scopedSlots:e._u([{key:"default",fn:function(e){return[i("div",{staticClass:"container-case-img "},[i("ImageView",{attrs:{src:e.row.cover_pic}})],1)]}}])}),e._v(" "),i("el-table-column",{attrs:{"min-width":"753px",align:"center",label:""},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticClass:"container-case-info"},[i("a",{attrs:{href:t.row.link_url,target:"_blank"}},[i("div",{staticClass:"info-name"},[e._v(e._s(t.row.title))]),e._v(" "),i("div",{staticClass:"info-describe"},[e._v(e._s(t.row.desc))])])])]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"",width:"320"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-row",[i("el-checkbox",{attrs:{"true-label":1,"false-label":0},on:{change:function(i){return e.selectTrigger(t.row,1)}},model:{value:t.row.status,callback:function(i){e.$set(t.row,"status",i)},expression:"scope.row.status"}},[e._v(e._s(t.row.status?"显示":"隐藏"))]),e._v(" "),i("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(i){return e.editCase(t.row)}}}),e._v(" "),i("el-button",{attrs:{type:"primary",icon:"el-icon-delete"},on:{click:function(i){return e.selectTrigger(t.row,2)}}})],1)]}}])})],1),e._v(" "),i("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],staticClass:"pagination-container",attrs:{total:e.total,page:e.listQuery.page,limit:e.listQuery.perPage},on:{"update:page":function(t){return e.$set(e.listQuery,"page",t)},"update:limit":function(t){return e.$set(e.listQuery,"perPage",t)},pagination:e.getList}})],1)},o=[],n=(i("7f7f"),i("c4c8")),r=i("333d"),s=i("53fe"),l=i.n(s),c=i("2d5d"),u=i("a969"),d={name:"ArticleList",components:{Pagination:r["a"],Upload:u["a"]},filters:{statusFilter:function(e){var t={published:"success",draft:"info",deleted:"danger"};return t[e]}},data:function(){return{dialogFormVisible:!1,form:{name:"",desc:"",linkUrl:"",dialogImageUrl:"",imageUrl:""},formRules:{name:[{required:!0,trigger:"blur",message:"请输入案例名称"}],desc:[{required:!0,trigger:"blur",message:"请输入案例介绍"}],dialogImageUrl:[{required:!0,trigger:"blur",message:"请上传封面图"}]},formLabelWidth:"120px",list:null,total:0,listLoading:!0,listQuery:{page:1,product_id:"",perPage:20},sortable:null,oldList:[],newList:[],checked:!0,radio:"link",fileList:[],showFileList:!1,dialogVisible:!1,imageName:"",upDate:!1,caseId:"",centerDialogVisible:!1,item:{},caseImg:""}},watch:{radio:function(){this.form.linkUrl=""}},created:function(){var e=this;this.$store.dispatch("product/getProductInfo",function(t){e.listQuery.product_id=t.id,e.getList()})},mounted:function(){},methods:{emptyForm:function(){this.form={name:"",desc:"",linkUrl:"",imageUrl:"",radio:"link",dialogImageUrl:""}},cancel:function(){this.dialogFormVisible=!1,this.upDate=!1,this.emptyForm()},editCase:function(e){this.dialogFormVisible=!0,this.form.desc=e.desc,this.form.name=e.title,this.form.dialogImageUrl=e.cover_pic,this.form.linkUrl=e.link_url,this.form.imageUrl=e.link_url,this.radio=e.type,this.upDate=!0,this.caseId=e.id,this.caseImg=e.link_url,"pdf"===this.radio?this.fileList=[{name:e.link_url,url:e.link_url}]:this.fileList=[]},deleteNews:function(){var e=this;Object(n["A"])({case_id:this.item.id,status:3}).then(function(t){var i=e.list.indexOf(e.item);e.list.splice(i,1),1e3===t.code&&(e.$message({message:"删除成功",type:"success"}),e.centerDialogVisible=!1)})},selectTrigger:function(e,t){1===t&&Object(n["A"])({case_id:e.id,status:e.status}).then(function(t){e.status=t.data.status}),2===t&&(this.centerDialogVisible=!0,this.item=e)},handleChange:function(e){var t=this;Object(c["a"])(e,function(i){t.form.imageUrl=i,t.imageName=e.name}),console.log(e,"文件")},handleRemove:function(e,t){console.log(e,t)},handlePreview:function(e){console.log(e)},beforeRemove:function(e){return this.$confirm("确定移除 ".concat(e.name,"？"))},handleExceed:function(e,t){console.log(t,"当前限制选择"),this.$message.warning("当前限制选择 1 个文件，本次选择了 ".concat(e.length," 个文件，共选择了 ").concat(e.length+t.length," 个文件"))},beforeAvatarUpload:function(e){console.log(e.type+"格式");var t="image/jpeg"===e.type||"image/png",i=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),i||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&i},submitCase:function(){var e=this,t="";"image"===this.radio?t=this.caseImg:"pdf"===this.radio&&(t={name:this.imageName,base64:this.form.imageUrl}),this.$refs.form.validate(function(i){return"link"!==e.radio||e.form.linkUrl?"image"!==e.radio||e.caseImg?"pdf"!==e.radio||e.form.imageUrl?i?void(e.upDate?Object(n["z"])({case_id:e.caseId,title:e.form.name,desc:e.form.desc,cover_pic:e.form.dialogImageUrl,type:e.radio,file:t,link_url:e.form.linkUrl}).then(function(t){1e3===t.code?(e.$message({message:"提交成功",type:"success"}),e.dialogFormVisible=!1,e.getList(),e.upDate=!1,e.emptyForm()):e.$message({message:t.message,type:"error"})}):Object(n["v"])({id:e.listQuery.product_id,title:e.form.name,desc:e.form.desc,cover_pic:e.form.dialogImageUrl,type:e.radio,file:t,link_url:e.form.linkUrl}).then(function(t){1e3===t.code?(e.$message({message:"提交成功",type:"success"}),e.dialogFormVisible=!1,e.getList(),e.emptyForm()):e.$message({message:t.message,type:"error"})})):(e.$message({message:"请正确填写表单",type:"error"}),!1):(e.$message({message:"请上传pdf文件",type:"error"}),!1):(e.$message({message:"请上传案例图片",type:"error"}),!1):(e.$message({message:"请填写链接地址",type:"error"}),!1)})},getList:function(){var e=this;this.listLoading=!0,Object(n["b"])(this.listQuery).then(function(t){e.list=t.data.data,e.total=t.data.total,e.listLoading=!1,e.$nextTick(function(){e.setSort()})})},handleSizeChange:function(e){this.listQuery.limit=e,this.getList()},handleCurrentChange:function(e){this.listQuery.page=e,this.getList()},setSort:function(){var e=this,t=this.$refs.dragTable.$el.querySelectorAll(".el-table__body-wrapper > table > tbody")[0];this.sortable=l.a.create(t,{ghostClass:"sortable-ghost",setData:function(e){e.setData("Text","")},onEnd:function(t){var i=e.list.splice(t.newIndex,1)[0];console.log(i,"交换排序targetRow"),e.list.splice(t.newIndex,0,i);var a=e.list.splice(t.oldIndex,1)[0];e.newList.splice(t.newIndex,0,a),console.log(a,"被交换排序tempIndex"),Object(n["r"])({case_id:i.id,to_case_id:a.id}).then(function(t){if(1e3!==t.code)return e.$message({message:t.message,type:"error"}),!1;e.getList()})}})},handlePictureCardPreview:function(e){var t=this;Object(c["a"])(e,function(e){t.form.dialogImageUrl=e,t.dialogVisible=!0})}}},m=d,g=(i("7c96"),i("a27e"),i("2877")),p=Object(g["a"])(m,a,o,!1,null,"6305fe5e",null);t["default"]=p.exports},f036:function(e,t,i){}}]);