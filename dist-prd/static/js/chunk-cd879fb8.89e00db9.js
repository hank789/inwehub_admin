(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cd879fb8"],{"2d5d":function(e,t,i){"use strict";function a(e,t){var i=new FileReader;i.readAsDataURL(e.raw),i.onload=function(e){console.log(e),t(e.target.result)}}i.d(t,"a",function(){return a})},"333d":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[i("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},n=[];i("c5f6");Math.easeInOutQuad=function(e,t,i,a){return e/=a/2,e<1?i/2*e*e+t:(e--,-i/2*(e*(e-2)-1)+t)};var o=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function r(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function s(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function l(e,t,i){var a=s(),n=e-a,l=20,c=0;t="undefined"===typeof t?500:t;var u=function e(){c+=l;var s=Math.easeInOutQuad(c,a,n,t);r(s),c<t?o(e):i&&"function"===typeof i&&i()};u()}var c={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll&&l(0,800)},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&l(0,800)}}},u=c,d=(i("dfcf"),i("2877")),m=Object(d["a"])(u,a,n,!1,null,"38ef71f0",null);t["a"]=m.exports},"3a60":function(e,t,i){},"586c":function(e,t,i){"use strict";var a=i("ccb0"),n=i.n(a);n.a},"669d":function(e,t,i){"use strict";var a=i("3a60"),n=i.n(a);n.a},"690d":function(e,t,i){},8790:function(e,t,i){"use strict";var a=i("94a2"),n=i.n(a);n.a},"94a2":function(e,t,i){},"9cde":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("添加专家观点")]),e._v(" "),i("el-dialog",{attrs:{title:"确定删除？",visible:e.centerDialogVisible,width:"30%",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[i("span",[e._v("删除后将不可恢复。")]),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.centerDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.deleteNews}},[e._v("确 定")])],1)]),e._v(" "),i("el-dialog",{attrs:{title:"添加专家观点",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("el-form",{ref:"form",attrs:{model:e.form,rules:e.formRules,"label-position":"top"}},[i("el-form-item",{attrs:{label:"",prop:"dialogImageUrl"}},[i("Upload",{staticStyle:{width:"300px",height:"200px"},attrs:{placeholder:"添加专家头像<br/>尺寸200px*200px<br/>2M以内"},model:{value:e.form.dialogImageUrl,callback:function(t){e.$set(e.form,"dialogImageUrl",t)},expression:"form.dialogImageUrl"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"专家姓名",prop:"name","label-width":e.formLabelWidth}},[i("el-input",{attrs:{placeholder:"输入专家姓名",autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"专家职位",prop:"job","label-width":e.formLabelWidth}},[i("el-input",{attrs:{placeholder:"输入专家职位",autocomplete:"off"},model:{value:e.form.job,callback:function(t){e.$set(e.form,"job",t)},expression:"form.job"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"观点内容",prop:"content","label-width":e.formLabelWidth}},[i("el-input",{attrs:{type:"textarea",rows:8,placeholder:"输入案例概述"},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.submitPoint}},[e._v("确 定")])],1)],1),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"dragTable",staticStyle:{width:"100%"},attrs:{data:e.list,border:!1,"row-key":"id",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{align:"center",label:"",width:"115"},scopedSlots:e._u([{key:"default",fn:function(e){return[i("div",{staticClass:"container-case-img"},[i("img",{attrs:{src:e.row.avatar,alt:""}})])]}}])}),e._v(" "),i("el-table-column",{attrs:{"min-width":"753px",align:"center",label:""},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticClass:"container-case-info"},[i("div",{staticClass:"info-name"},[e._v(e._s(t.row.name)+" "),i("i"),e._v(" "+e._s(t.row.title))]),e._v(" "),i("div",{staticClass:"info-describe"},[e._v(e._s(t.row.content))])])]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"",width:"320"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-row",[i("el-checkbox",{attrs:{"true-label":1,"false-label":0},on:{change:function(i){return e.selectTrigger(t.row,1)}},model:{value:t.row.status,callback:function(i){e.$set(t.row,"status",i)},expression:"scope.row.status"}},[e._v(e._s(t.row.status?"显示":"隐藏"))]),e._v(" "),i("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(i){return e.editPonit(t.row)}}}),e._v(" "),i("el-button",{attrs:{type:"primary",icon:"el-icon-delete"},on:{click:function(i){return e.selectTrigger(t.row,2)}}})],1)]}}])})],1),e._v(" "),i("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],staticClass:"pagination-container",attrs:{total:e.total,page:e.listQuery.page,limit:e.listQuery.limit},on:{"update:page":function(t){return e.$set(e.listQuery,"page",t)},"update:limit":function(t){return e.$set(e.listQuery,"limit",t)},pagination:e.getList}})],1)},n=[],o=(i("7f7f"),i("c4c8")),r=i("333d"),s=i("53fe"),l=i.n(s),c=i("2d5d"),u=i("a969"),d={name:"ArticleList",components:{Pagination:r["a"],Upload:u["a"]},filters:{statusFilter:function(e){var t={published:"success",draft:"info",deleted:"danger"};return t[e]}},data:function(){return{dialogFormVisible:!1,form:{name:"",content:"",job:"",dialogImageUrl:""},formRules:{name:[{required:!0,trigger:"blur",message:"请填写专家姓名"}],job:[{required:!0,trigger:"blur",message:"请填写专家职位"}],content:[{required:!0,trigger:"blur",message:"请填写观点内容"}],dialogImageUrl:[{required:!0,trigger:"blur",message:"请上传专家头像"}]},formLabelWidth:"120px",list:null,total:0,listLoading:!0,listQuery:{page:1,product_id:""},sortable:null,oldList:[],newList:[],checked:!0,upDate:!1,pointId:"",dialogVisible:!1,centerDialogVisible:!1,item:{}}},created:function(){var e=this;this.$store.dispatch("product/getProductInfo",function(t){e.listQuery.product_id=t.id,e.getList()})},methods:{emptyForm:function(){this.form={name:"",content:"",dialogImageUrl:"",job:""}},editPonit:function(e){this.dialogFormVisible=!0,this.form.content=e.content,this.form.name=e.name,this.form.dialogImageUrl=e.avatar,this.upDate=!0,this.pointId=e.id},deleteNews:function(){var e=this;Object(o["v"])({idea_id:this.item.id,status:3}).then(function(t){var i=e.list.indexOf(e.item);e.list.splice(i,1),1e3===t.code&&(e.$message({message:"删除成功",type:"success"}),e.centerDialogVisible=!1)})},selectTrigger:function(e,t){1===t&&Object(o["v"])({idea_id:e.id,status:e.status}).then(function(t){e.status=t.data.status}),2===t&&(this.item=e,this.centerDialogVisible=!0)},submitPoint:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return e.$message({message:"请正确填写表单",type:"error"}),!1;e.upDate?Object(o["u"])({idea_id:e.pointId,name:e.form.name,content:e.form.content,avatar:e.form.dialogImageUrl,title:e.form.job}).then(function(t){1e3===t.code?(e.$message({message:"提交成功",type:"success"}),e.dialogFormVisible=!1,e.getList(),e.upDate=!1,e.emptyForm()):e.$message({message:t.message,type:"error"})}):Object(o["p"])({id:e.listQuery.product_id,name:e.form.name,title:e.form.job,avatar:e.form.dialogImageUrl,content:e.form.content}).then(function(t){1e3===t.code?(e.$message({message:"提交成功",type:"success"}),e.dialogFormVisible=!1,e.getList(),e.emptyForm()):e.$message({message:t.message,type:"error"})})})},getList:function(){var e=this;this.listLoading=!0,Object(o["i"])(this.listQuery).then(function(t){e.list=t.data.data,e.total=t.data.total,e.listLoading=!1,e.$nextTick(function(){e.setSort()})})},handleRemove:function(e,t){console.log(e,t)},handleSizeChange:function(e){this.listQuery.limit=e,this.getList()},handleCurrentChange:function(e){this.listQuery.page=e,this.getList()},setSort:function(){var e=this,t=this.$refs.dragTable.$el.querySelectorAll(".el-table__body-wrapper > table > tbody")[0];this.sortable=l.a.create(t,{ghostClass:"sortable-ghost",setData:function(e){e.setData("Text","")},onEnd:function(t){var i=e.list.splice(t.oldIndex,1)[0];e.list.splice(t.newIndex,0,i),console.log(i,"交换排序targetRow");var a=e.list.splice(t.oldIndex,1)[0];e.newList.splice(t.newIndex,0,a),console.log(a,"被交换排序tempIndex"),Object(o["l"])({idea_id:i.id,to_idea_id:a.id}).then(function(t){if(1e3!==t.code)return e.$message({message:t.message,type:"error"}),!1;e.getList()})}})},handlePictureCardPreview:function(e){var t=this;Object(c["a"])(e,function(e){t.form.dialogImageUrl=e,t.dialogVisible=!0})}}},m=d,g=(i("669d"),i("8790"),i("2877")),p=Object(g["a"])(m,a,n,!1,null,"0c2673e5",null);t["default"]=p.exports},a969:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"singleImageUpload2 upload-container"},[i("el-upload",{ref:"uploadEl",staticClass:"image-uploader",attrs:{action:"''","auto-upload":!1,"show-file-list":!1,"list-type":"picture","on-change":e.handleImageSuccess,drag:""}},[i("div",{staticClass:"image-prepare"},[i("svg-icon",{attrs:{"icon-class":"camera"}}),e._v(" "),i("div",{staticClass:"image-desc",domProps:{innerHTML:e._s(e.placeholder)}})],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.imageUrl.length>0,expression:"imageUrl.length>0"}],staticClass:"image-preview"},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.imageUrl.length>1,expression:"imageUrl.length>1"}],staticClass:"image-preview-wrapper"},[i("img",{attrs:{src:e.imageUrl}}),e._v(" "),i("div",{staticClass:"image-preview-action"},[i("svg-icon",{attrs:{"icon-class":"camera"}})],1)])])])],1)},n=[],o=i("2d5d"),r={name:"SingleImageUpload2",props:{value:{type:String,default:""},placeholder:{type:String,default:"添加产品Logo<br/>尺寸200px*200px<br/>2M以内"}},data:function(){return{tempUrl:"",dataObj:{token:"",key:""}}},computed:{imageUrl:function(){return this.value}},methods:{uploadStart:function(){console.log(this.$refs.uploadEl)},rmImage:function(){this.emitInput("")},emitInput:function(e){this.$emit("input",e)},handleImageSuccess:function(e){var t=this,i=e.size/1024/1024<2;i?Object(o["a"])(e,function(e){t.emitInput(e)}):this.$message.error("上传图片大小不能超过 2MB!")}}},s=r,l=(i("586c"),i("2877")),c=Object(l["a"])(s,a,n,!1,null,"40a6bd78",null);t["a"]=c.exports},ccb0:function(e,t,i){},dfcf:function(e,t,i){"use strict";var a=i("690d"),n=i.n(a);n.a}}]);