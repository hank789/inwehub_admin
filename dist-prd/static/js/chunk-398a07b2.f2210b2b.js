(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-398a07b2"],{"2ace":function(e,t,i){"use strict";var n=i("3a8d"),a=i.n(n);a.a},"2d5d":function(e,t,i){"use strict";function n(e,t){var i=new FileReader;i.readAsDataURL(e.raw),i.onload=function(e){console.log(e),t(e.target.result)}}i.d(t,"a",function(){return n})},"35f4":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("div",{staticClass:"top-text"},[e._v("请上传统一尺寸的图片，否则以首张图片尺寸为准(限10张)")]),e._v(" "),i("el-upload",{ref:"foreignPersonUploadItem",staticClass:"avatar-image",attrs:{action:"''","auto-upload":!1,multiple:"","list-type":"picture-card","on-change":e.handleAvatarSuccess,"on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove,"file-list":e.filePic,"on-exceed":e.handleExceed,limit:10,"before-remove":e.beforeRemove}},[i("div",{staticClass:"container-text"},[i("svg-icon",{attrs:{"icon-class":"camera"}}),e._v(" "),i("div",[e._v("添加产品亮点图")]),e._v(" "),i("div",[e._v("推荐尺寸900px*1250px")])],1)]),e._v(" "),i("el-dialog",{staticClass:"image-list",attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})]),e._v(" "),i("el-row",[i("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("保存")])],1)],1)},a=[],c=i("c4c8"),o=i("2d5d"),s=i("53fe"),r=i.n(s),l={data:function(){return{dialogImageUrl:[],dialogVisible:!1,listQuery:{product_id:""},filePic:[],sortable:null,oldList:[],newList:[]}},created:function(){var e=this;this.$store.dispatch("product/getProductInfo",function(t){e.listQuery.product_id=t.id,e.getPicList()})},mounted:function(){},methods:{submit:function(){var e=this;Object(c["x"])({id:this.listQuery.product_id,introduce_pic_arr:this.dialogImageUrl}).then(function(t){1e3===t.code&&e.$message({message:"提交成功",type:"success"})})},getPicList:function(){var e=this;Object(c["g"])({id:this.listQuery.product_id}).then(function(t){var i=t.data.introduce_pic.map(function(e){return{url:e}});e.filePic=i,e.filePic.length>=10?document.querySelector(".avatar-image .el-upload--picture-card").style.display="none":document.querySelector(".avatar-image .el-upload--picture-card").style.display="inline-block",e.$nextTick(function(){e.setSort()})})},handleExceed:function(e,t){this.$message.warning("当前限制选择 10 个文件，本次选择了 ".concat(e.length," 个文件，共选择了 ").concat(e.length+t.length," 个文件"))},beforeRemove:function(e,t){var i=this;return this.$confirm("删除后将不可恢复。","确定删除？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(c["c"])({introduce_pic:e.url,id:i.listQuery.product_id}).then(function(e){1e3===e.code?(i.$message({message:"删除成功",type:"success"}),i.filePic.length--,i.getPicList()):i.$message({message:e.message,type:"success"})})}).catch(function(){}),!1},handleRemove:function(e,t){console.log(t,"删除成功")},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handleAvatarSuccess:function(e,t){var i=this;t.length>=10&&(document.querySelector(".avatar-image .el-upload--picture-card").style.display="none"),Object(o["a"])(e,function(e){i.dialogImageUrl.push(e)})},setSort:function(){var e=this,t=this.$refs.foreignPersonUploadItem.$el.querySelector(".avatar-image > ul");this.sortable=r.a.create(t,{ghostClass:"sortable-ghost",setData:function(e){e.setData("Text","")},onEnd:function(t){var i=e.filePic.splice(t.newIndex,1)[0];e.filePic.splice(t.newIndex,0,i);var n=e.filePic.splice(t.oldIndex,1)[0];e.filePic.splice(t.newIndex,0,n);var a=e.filePic.map(function(e){return e.url});Object(c["m"])({id:e.listQuery.product_id,introduce_pic_arr:a}).then(function(e){console.log(e)})}})}}},u=l,d=(i("2ace"),i("ae74"),i("2877")),f=Object(d["a"])(u,n,a,!1,null,"244b8eb4",null);t["default"]=f.exports},"3a8d":function(e,t,i){},"8be8":function(e,t,i){},ae74:function(e,t,i){"use strict";var n=i("8be8"),a=i.n(n);a.a}}]);